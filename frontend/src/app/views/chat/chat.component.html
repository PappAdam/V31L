@if (this.platform?.platform == "web") {
<div class="chat-outer-wrapper">
  <div class="chat-wrapper">
    <app-header (detailsStateEvent)="updateDetailsState($event)"></app-header>
    <div class="messages-wrapper">
      @for (message of (this.selectedChat$ | async)?.messages; track $index) {

      <app-message
        msg="{{ message.content }}"
        first="{{
          message.user.username == this.previousUser ? 'false' : 'first'
        }}"
        sender="{{
          message.user.username == authService.user?.username
            ? ''
            : message.user.username
        }}"
      ></app-message>

      {{ updatePreviousUser(message.user.username) }}

      }
    </div>
    <div class="input-wrapper">
      <div class="text-input-box">
        <div
          (keydown.enter)="sendOnEnter($event)"
          #textInput
          class="text-input"
          contenteditable="true"
        ></div>
      </div>
      <button mat-mini-fab (click)="sendMessage()">
        <mat-icon fontIcon="send"></mat-icon>
      </button>
      <button mat-mini-fab class="message-button" disabled>
        <mat-icon fontIcon="image"></mat-icon>
      </button>
      <button mat-mini-fab class="message-button" disabled>
        <mat-icon fontIcon="microphone"></mat-icon>
      </button>
    </div>
  </div>
  <app-details [state]="detailsState"></app-details>
</div>

} @else {
<div class="chat-outer-wrapper">
  <div class="chat-wrapper">
    <app-header (detailsStateEvent)="updateDetailsState($event)"></app-header>
    <div class="messages-wrapper">
      @for (message of (this.selectedChat$ | async)?.messages; track $index) {

      <app-message
        msg="{{ message.content }}"
        first="{{
          message.user.username == this.previousUser ? 'false' : 'first'
        }}"
        sender="{{
          message.user.username == authService.user?.username
            ? ''
            : message.user.username
        }}"
      ></app-message>

      {{ updatePreviousUser(message.user.username) }}

      }
    </div>
    <div class="input-wrapper">
      <div class="text-input-box">
        <div
          (keydown.enter)="sendOnEnter($event)"
          #textInput
          class="text-input"
          contenteditable="true"
        ></div>
      </div>
      <button mat-mini-fab (click)="sendMessage()">
        <mat-icon fontIcon="send"></mat-icon>
      </button>
      <button mat-mini-fab class="message-button" disabled>
        <mat-icon fontIcon="image"></mat-icon>
      </button>
      <button mat-mini-fab class="message-button" disabled>
        <mat-icon fontIcon="microphone"></mat-icon>
      </button>
    </div>
  </div>
  <div class="detail-mobile-wrapper">
    <app-details [state]="detailsState"></app-details>
  </div>
</div>
}
